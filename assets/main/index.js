System.register("chunks:///_virtual/ArrayExtension.ts",["cc"],(function(){var t;return{setters:[function(r){t=r.cclegacy}],execute:function(){t._RF.push({},"0d004h0FR5B27tvo0JZkQc2","ArrayExtension",void 0),Array.prototype.shuffle2D=function(){for(var t=this,r=0;r<t.length;r++)for(var n=0;n<t[r].length;n++){var e=Math.floor(Math.random()*t.length),o=Math.floor(Math.random()*t[r].length),a=[t[e][o],t[r][n]];t[r][n]=a[0],t[e][o]=a[1]}return t},t._RF.pop()}}}));

System.register("chunks:///_virtual/ArrayUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t;return{setters:[function(e){r=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"32aa0PVPLdAcIxyjXKaPZeN","ArrayUtils",void 0),e("ArrayUtils",function(){function e(){}return e.removeDuplicateCoordinates=function(e){for(var t,n=new Set,o=r(e);!(t=o()).done;)for(var u=t.value,a=u.length-1;a>=0;a--){var i=u[a],f=i[0]+","+i[1];n.has(f)?u.splice(a,1):n.add(f)}},e.removeItem=function(r,t,n){void 0===n&&(n=e.REMOVE_COUNT_ALL);var o=!1;n===e.REMOVE_COUNT_ALL&&(n=Number.MAX_VALUE);for(var u=0,a=r.indexOf(t);-1!==a&&u<n;)r.splice(a,1),a=r.indexOf(t,a),u++,o=!0;return o},e.removeItemsFromArray=function(r,t){for(var n,o=0;o<t.length;o++)n=t[o],e.removeItem(r,n)},e.getRandomItem=function(r,t){var n;r&&r.length>0&&(t&&(r=r.concat(),e.removeItemsFromArray(r,t)),n=r[Math.floor(Math.random()*r.length)]);return n},e.removeDuplicates=function(r){return r.filter(e.removeDuplicatesFilter)},e.shuffle=function(e){return e.sort((function(){return Math.random()-.5}))},e.find=function(e,t){for(var n,o=r(e);!(n=o()).done;){var u=n.value;if(t(u))return u}return null},e.mergeUnique=function(e,r){return e.filter((function(e,t,n){return r.indexOf(e)<0})).concat(r)},e.values=function(e){for(var r=[],t=0,n=Object.keys(e);t<n.length;t++){var o=n[t];r.push(e[o])}return r},e.removeDuplicatesFilter=function(e,r,t){return 0===r||-1===t.lastIndexOf(e,r-1)},e.getArrayFilledWithRange=function(e,r){return Array(r-e+1).fill(0).map((function(r,t){return e+t}))},e.getWeightedRandom=function(e){var r,t=[];for(r=0;r<e.length;r++)t[r]=e[r].weight+(t[r-1]||0);var n=Math.random()*t[t.length-1];for(r=0;r<t.length&&!(t[r]>n);r++);return e[r].item},e}()).REMOVE_COUNT_ALL=-1,t._RF.pop()}}}));

System.register("chunks:///_virtual/BaseState.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"75426wlhblAAZQ2KM4/7y/E","BaseState",void 0);e("BaseState",function(){function e(e){this._name=void 0,this._name=e}return t(e,[{key:"name",get:function(){return this._name}}]),e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/ClusterSeekerService.ts",["cc","./singleton.ts"],(function(e){var t,r;return{setters:[function(e){t=e.cclegacy},function(e){r=e.singleton}],execute:function(){var n;t._RF.push({},"7837cjo+U9HU755oJlAGpDO","ClusterSeekerService",void 0);e("ClusterSeekerService",r()(n=function(){function e(){}var t=e.prototype;return t.FindAllClusters=function(e,t,r){for(var n=[],l=Array(e.length).fill(null).map((function(){return Array(e[0].length).fill(!1)})),u=0;u<e.length;u++)for(var i=0;i<e[u].length;i++)if(!l[u][i]&&e[u][i]){if(e[u][i].IsBooster){n.push([e[u][i]]);continue}var s=e[u][i].ItemType,f=this.findCluster(e,l,u,i,s);f.length>=t&&n.push(f)}return n},t.CollectCluster=function(e,t,r,n,l){var u,i=Array(e.length).fill(null).map((function(){return Array(e[0].length).fill(!1)}));if(null==(u=e[r])||!u[n])return[];var s=e[r][n][l],f=this.findCluster(e,i,r,n,s);return f.length>=t?f:[]},t.findCluster=function(e,t,r,n,l){for(var u=[],i=[[r,n]];i.length>0;){var s=i.shift(),f=s[0],o=s[1];if(!(f<0||f>=e.length||o<0||o>=e[0].length||t[f][o])&&e[f][o]&&e[f][o].ItemType===l){t[f][o]=!0,u.push(e[f][o]);for(var c=0,h=[[0,1],[1,0],[0,-1],[-1,0]];c<h.length;c++){var a=h[c],g=f+a[0],v=o+a[1];g>=0&&g<e.length&&v>=0&&v<e[0].length&&!t[g][v]&&e[g][v]&&e[g][v].ItemType===l&&i.push([g,v])}}}return u},e}())||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/Column1RocketActivated.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseState.ts"],(function(t){var e,n,r,o,c;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy},function(t){c=t.BaseState}],execute:function(){o._RF.push({},"843a3D+m89LZIXeSksR/Vqe","Column1RocketActivated",void 0),t("Column1RocketActivated",function(t){function o(){return t.call(this,o.STATE_NAME)||this}return e(o,t),o.prototype.onEnter=function(){var t=n(r().mark((function t(e){var n,o,c,u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=e.items,o=[],c=e.selectedItem.position.x,u=0;u<n[0].length;u++)n[c][u]&&o.push(n[c][u]);e.currentCluster=o;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o}(c)).STATE_NAME="Column1RocketActivated",o._RF.pop()}}}));

System.register("chunks:///_virtual/Column2RocketActivated.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseState.ts"],(function(t){var e,n,r,o,c;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy},function(t){c=t.BaseState}],execute:function(){o._RF.push({},"62c00QDNc9GCIwGy4t6k0no","Column2RocketActivated",void 0),t("Column2RocketActivated",function(t){function o(){return t.call(this,o.STATE_NAME)||this}return e(o,t),o.prototype.onEnter=function(){var t=n(r().mark((function t(e){var n,o,c,u,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=e.items,o=[],c=e.selectedItem.position.x,u=0;u<n[0].length;u++)for(i=Math.max(0,c-1);i<=Math.min(c+1,n.length-1);i++)n[i][u]&&o.push(n[i][u]);e.currentCluster=o;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o}(c)).STATE_NAME="Column2RocketActivated",o._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/dependency-injection.ts",["cc","./Dictionary.ts"],(function(n){var e,c;return{setters:[function(n){e=n.cclegacy},function(n){c=n.Dictionary}],execute:function(){e._RF.push({},"b5fe5fDvr1JkrzDdd7ZMd+J","dependency-injection",void 0);n("classMap",new c);e._RF.pop()}}}));

System.register("chunks:///_virtual/Dictionary.ts",["cc","./UniqueUtils.ts"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.UniqueUtils}],execute:function(){e._RF.push({},"b0d4bGxboVEJ5aNd4DDR1dq","Dictionary",void 0);t("Dictionary",function(){function t(){this.map={}}var e=t.prototype;return e.get=function(t){var e=n.getObjectUniqueId(t);return this.map[e]},e.add=function(t,e){var i=n.getObjectUniqueId(t);this.map[i]=e},e.remove=function(t){var e=n.getObjectUniqueId(t);delete this.map[e]},e.forEach=function(t){for(var e,n=Object.keys(this.map),i=n.length,c=0;c<i;c++)e=n[c],t(this.map[e])},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/EnumGameTool.ts",["cc"],(function(O){var _;return{setters:[function(O){_=O.cclegacy}],execute:function(){_._RF.push({},"d84fcU7D5ZBTYAz2rGIAXOI","EnumGameTool",void 0);O("GameTool",function(O){return O.SELECTOR="SELECTOR",O.BOMB_1="BOMB_1",O.BOMB_2="BOMB_2",O.ROW_ROCKET_1="ROW_ROCKET_1",O.COL_ROCKET_1="COL_ROCKET_1",O.ROW_ROCKET_2="ROW_ROCKET_2",O.COL_ROCKET_2="COL_ROCKET_2",O.NUKE_BOMB="NUKE_BOMB",O}({}));_._RF.pop()}}}));

System.register("chunks:///_virtual/FieldCoordinatesService.ts",["cc","./injectable.ts","./inject.ts","./LevelConfiguration.ts"],(function(i){var t,l,e,o;return{setters:[function(i){t=i.cclegacy},function(i){l=i.injectable},function(i){e=i.inject},function(i){o=i.LevelConfigurationService}],execute:function(){var n;t._RF.push({},"2719dHuoyZOg4bzsDfxFUsV","FieldCoordinatesService",void 0);i("FieldCoordinatesService",l()(n=function(){function i(){this._lvlConf=e(o),this._widthInPixels=void 0,this._heightInPixels=void 0,this.offsetX=void 0,this.offsetY=void 0,this._widthInPixels=this._lvlConf.width*this._lvlConf.cellWidth,this._heightInPixels=this._lvlConf.height*this._lvlConf.cellHeight,this.offsetX=this._widthInPixels/2,this.offsetY=this._heightInPixels/2}var t=i.prototype;return t.worldToFieldCoordsinates=function(i,t){var l=this._lvlConf.width*this._lvlConf.cellWidth/2,e=this._lvlConf.height*this._lvlConf.cellHeight/2;return{x:Math.floor((i+l)/this._lvlConf.cellWidth),y:Math.floor((t+e)/this._lvlConf.cellHeight)}},t.fieldToWorldCoordsinates=function(i,t){this._lvlConf.width,this._lvlConf.cellWidth,this._lvlConf.height,this._lvlConf.cellHeight;return{x:(i-(this._lvlConf.width-1)/2)*this._lvlConf.cellWidth,y:(t-(this._lvlConf.height-1)/2)*this._lvlConf.cellHeight}},t.fieldSpawnToWorldCoordsinates=function(i,t){var l=this.fieldToWorldCoordsinates(i,this._lvlConf.height);return{x:l.x,y:l.y+2*this._lvlConf.cellHeight}},i}())||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/FiniteStateMachine.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,a;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime,r=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy}],execute:function(){a._RF.push({},"83d2e2jR+1NupjhO9j6DomJ","FiniteStateMachine",void 0);t("FiniteStateMachine",function(){var t=a.prototype;function a(t){this.states=new Map,this.transitions=[],this.currentState=null,this.context=void 0,this._stateObservers=new Set,this.context=t}return t.addStateObserver=function(t){this._stateObservers.add(t)},t.removeStateObserver=function(t){this._stateObservers.delete(t)},t.notifyGameStateChanged=function(t){this._stateObservers.forEach((function(e){return e.onStateChanged(t)}))},t.addState=function(t){this.states.set(t.name,t)},t.addTransition=function(t){this.transitions.push(t)},t.setInitialState=function(){var t=e(n().mark((function t(e){var r,a,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.states.get(e)){t.next=3;break}throw new Error("State "+e+" not found");case 3:return this.currentState=i,t.next=6,null==(r=(a=this.currentState).onEnter)?void 0:r.call(a,this.context);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t.update=function(){var t=e(n().mark((function t(){var e,a,i,s,o,u,c=this;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.currentState){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,null==(e=(a=this.currentState).update)?void 0:e.call(a,this.context);case 4:i=this.transitions.filter((function(t){return t.from===c.currentState.name})),s=r(i);case 6:if((o=s()).done){t.next=14;break}if((u=o.value).guardCondition&&!u.guardCondition(this.context)){t.next=12;break}return t.next=11,this.transitionTo(u.to);case 11:return t.abrupt("break",14);case 12:t.next=6;break;case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),t.transitionTo=function(){var t=e(n().mark((function t(e){var r,a,i,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=this.states.get(e)){t.next=3;break}throw new Error("State "+e+" not found");case 3:return t.next=5,null==(r=this.currentState)||null==r.onExit?void 0:r.onExit(this.context);case 5:return this.currentState=s,t.next=8,null==(a=(i=this.currentState).onEnter)?void 0:a.call(i,this.context);case 8:this.notifyGameStateChanged(e);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t.getCurrentState=function(){var t,e;return null!=(t=null==(e=this.currentState)?void 0:e.name)?t:null},a}());a._RF.pop()}}}));

System.register("chunks:///_virtual/GameBombActivation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./inject.ts","./BaseState.ts","./LevelConfiguration.ts","./PlayerInventoryService.ts","./EnumGameTool.ts"],(function(t){var e,n,r,o,i,u,c,a,s;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy},function(t){i=t.inject},function(t){u=t.BaseState},function(t){c=t.LevelConfigurationService},function(t){a=t.PlayerInventoryService},function(t){s=t.GameTool}],execute:function(){o._RF.push({},"ff5e1s4HzFI3qAMfG37Br+2","GameBombActivation",void 0),t("GameBombActivation",function(t){function o(){var e;return(e=t.call(this,o.STATE_NAME)||this)._lvlConf=i(c),e._inventory=i(a),e}return e(o,t),o.prototype.onEnter=function(){var t=n(r().mark((function t(e){var n,o,i,u,c,a,l,f,v;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this._inventory.getAmount(e.currentTool)<=0)){t.next=4;break}return e.skipMove=!0,e.currentTool=s.SELECTOR,t.abrupt("return");case 4:if(this._inventory.removeAmount(e.currentTool,1),n=e.selectedItem){t.next=8;break}return t.abrupt("return");case 8:for(o=e.items,i=this._lvlConf.bombRadius[e.currentTool],u=[],c=-i;c<=i;c++)for(a=-i;a<=i;a++)l=n.position.x+c,f=n.position.y+a,l>=0&&l<o.length&&f>=0&&f<o[0].length&&(v=o[l][f])&&u.push(v);e.currentCluster=u;case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),o}(u)).STATE_NAME="GameBombActivation",o._RF.pop()}}}));

System.register("chunks:///_virtual/GameCalculateScore.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseState.ts"],(function(e){var t,r,n,a,c;return{setters:[function(e){t=e.inheritsLoose,r=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){a=e.cclegacy},function(e){c=e.BaseState}],execute:function(){a._RF.push({},"7be5f8+c6tOXoiLGskJHwiW","GameCalculateScore",void 0),e("GameCalculateScore",function(e){function a(){return e.call(this,a.STATE_NAME)||this}return t(a,e),a.prototype.onEnter=function(){var e=r(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.gameMoves++,r=0;r<t.currentCluster.length;r++)t.gameScore+=t.lvlConf.paytable[t.currentCluster[r].ItemType];case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}(c)).STATE_NAME="GameCalculateScore",a._RF.pop()}}}));

System.register("chunks:///_virtual/GameCollapseField.ts",["./rollupPluginModLoBabelHelpers.js","cc","./inject.ts","./BaseState.ts","./FieldCoordinatesService.ts"],(function(e){var t,n,r,i,a,o,s;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){i=e.cclegacy},function(e){a=e.inject},function(e){o=e.BaseState},function(e){s=e.FieldCoordinatesService}],execute:function(){i._RF.push({},"e995etvZ8pA/p8wNlM83UqA","GameCollapseField",void 0),e("GameCollapseField",function(e){function i(){var t;return(t=e.call(this,i.STATE_NAME)||this)._coordinatesService=a(s),t}return t(i,e),i.prototype.onEnter=function(){var e=n(r().mark((function e(t){var n,i,a,o,s,c,l,u;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.items,i=n[0].length,t.lvlConf,a=[],o=0;case 5:if(!(o<n.length)){e.next=27;break}s=0;case 7:if(!(s<i)){e.next=24;break}if(n[o][s]){e.next=21;break}c=s+1;case 10:if(!(c<i)){e.next=21;break}if(!(l=n[o][c])){e.next=18;break}return u=this._coordinatesService.fieldToWorldCoordsinates(o,s),a.push(l.moveToPosition(u.x,u.y,.07,.04*o)),n[o][s]=n[o][c],n[o][c]=null,e.abrupt("break",21);case 18:c++,e.next=10;break;case 21:s++,e.next=7;break;case 24:o++,e.next=5;break;case 27:return e.next=29,Promise.all(a);case 29:t.isMovingItems=!1;case 30:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i}(o)).STATE_NAME="GameCollapseField",i._RF.pop()}}}));

System.register("chunks:///_virtual/GameCollectAllClusters.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameFieldItem.ts","./inject.ts","./BaseState.ts","./ClusterSeekerService.ts"],(function(e){var t,r,n,s,l,u,i,c;return{setters:[function(e){t=e.inheritsLoose,r=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){s=e.cclegacy},function(e){l=e.GameFieldItem},function(e){u=e.inject},function(e){i=e.BaseState},function(e){c=e.ClusterSeekerService}],execute:function(){s._RF.push({},"49810EzMqdAUJ5dNuHPw4jW","GameCollectAllClusters",void 0),e("GameCollectAllClusters",function(e){function s(){var t;return(t=e.call(this,s.STATE_NAME)||this)._clusterSeeker=u(c),t}return t(s,e),s.prototype.onEnter=function(){var e=r(n().mark((function e(t){var r,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.gameConf,s=t.items,t.remainClusters=this._clusterSeeker.FindAllClusters(s,r.minClusterSize,l.COMPONENT_NAME),t.remainClusters.length>0&&(t.shuffleCounter=0);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s}(i)).STATE_NAME="GameCollectAllClusters",s._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfigurationService.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singleton.ts"],(function(t){var n,e,i;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy},function(t){i=t.singleton}],execute:function(){var s;e._RF.push({},"870b36gwlVGwahBKcycJDKR","GameConfigurationService",void 0);t("GameConfigurationService",i()(s=function(){function t(){this._reshuffles=3,this._minClusterSize=4,this._startPointsAmount=0}return n(t,[{key:"reshuffles",get:function(){return this._reshuffles}},{key:"minClusterSize",get:function(){return this._minClusterSize}},{key:"startPointsAmount",get:function(){return this._startPointsAmount},set:function(t){this._startPointsAmount=t}}]),t}())||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/GameContext.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singleton.ts","./LevelConfiguration.ts","./GameConfigurationService.ts","./inject.ts","./EnumGameTool.ts"],(function(e){var t,n,o,s,i,r,u;return{setters:[function(e){t=e.createClass},function(e){n=e.cclegacy},function(e){o=e.singleton},function(e){s=e.LevelConfigurationService},function(e){i=e.GameConfigurationService},function(e){r=e.inject},function(e){u=e.GameTool}],execute:function(){var f;n._RF.push({},"4cda8RJhytA5IW+4TvTwXik","GameContext",void 0);e("GameContext",o()(f=function(){function e(){this._itemPrefabs=null,this._dropPrefabs=null,this._itemsPool=[],this._items=[],this._dropsPool=[],this._gameNode=null,this._lvlConf=r(s),this._gameConf=r(i),this._selectedItem=null,this._droppedItems=[],this._currentCluster=null,this._isMovingItems=!1,this._remainClusters=[],this._shuffleCounter=0,this._onClickedItemCb=null,this._gameScore=0,this._gameMoves=0,this._currentTool=u.SELECTOR,this._observers=new Set,this._toolObservers=new Set,this._skipMove=!1}var n=e.prototype;return n.addToolObserver=function(e){this._toolObservers.add(e)},n.removeToolObserver=function(e){this._toolObservers.delete(e)},n.addObserver=function(e){this._observers.add(e)},n.removeObserver=function(e){this._observers.delete(e)},n.notifyScoreChanged=function(e){this._observers.forEach((function(t){return t.onScoreChanged(e)}))},n.notifyMovesChanged=function(e){this._observers.forEach((function(t){return t.onMovesChanged(e)}))},n.notifyToolChanged=function(e){this._toolObservers.forEach((function(t){return t.onToolChanged(e)}))},t(e,[{key:"skipMove",get:function(){return this._skipMove},set:function(e){this._skipMove=e}},{key:"dropPrefabs",get:function(){return this._dropPrefabs},set:function(e){this._dropPrefabs=e}},{key:"dropsPool",get:function(){return this._dropsPool},set:function(e){this._dropsPool=e}},{key:"droppedItems",get:function(){return this._droppedItems},set:function(e){this._droppedItems=e}},{key:"currentTool",get:function(){return this._currentTool},set:function(e){this._currentTool!=e&&(this._currentTool=e,this.notifyToolChanged(e))}},{key:"outOfMoves",get:function(){return this._gameMoves>=this.lvlConf.maxMoves}},{key:"pointTargetReached",get:function(){return this._gameScore>=this.lvlConf.targetScore}},{key:"gameMoves",get:function(){return this._gameMoves},set:function(e){this._gameMoves!==e&&(this._gameMoves=e,this.notifyMovesChanged(e))}},{key:"gameScore",get:function(){return this._gameScore},set:function(e){this._gameScore!==e&&(this._gameScore=e,this.notifyScoreChanged(e))}},{key:"onClickedItemCb",get:function(){return this._onClickedItemCb},set:function(e){this._onClickedItemCb=e}},{key:"shuffleCounter",get:function(){return this._shuffleCounter},set:function(e){this._shuffleCounter=e}},{key:"remainClusters",get:function(){return this._remainClusters},set:function(e){this._remainClusters=e}},{key:"isMovingItems",get:function(){return this._isMovingItems},set:function(e){this._isMovingItems=e}},{key:"currentCluster",get:function(){return this._currentCluster},set:function(e){this._currentCluster=e}},{key:"selectedItem",get:function(){return this._selectedItem},set:function(e){this._selectedItem=e}},{key:"gameNode",get:function(){return this._gameNode},set:function(e){this._gameNode=e}},{key:"items",get:function(){return this._items},set:function(e){this._items=e}},{key:"lvlConf",get:function(){return this._lvlConf}},{key:"gameConf",get:function(){return this._gameConf}},{key:"itemPrefabs",get:function(){return this._itemPrefabs},set:function(e){this._itemPrefabs=e}},{key:"itemsPool",get:function(){return this._itemsPool},set:function(e){this._itemsPool=e}},{key:"canReshuffle",get:function(){return this._shuffleCounter<=this.gameConf.reshuffles}},{key:"needReshuffle",get:function(){return 0==this.remainClusters.length}}]),e}())||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameDropBooster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameFieldItem.ts","./inject.ts","./BaseState.ts","./ArrayUtils.ts","./LevelConfiguration.ts","./SelectedItemData.ts","./EnumGameTool.ts"],(function(e){var t,n,r,o,a,s,i,u,c,l,p,f;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){o=e.cclegacy,a=e.instantiate},function(e){s=e.GameFieldItem},function(e){i=e.inject},function(e){u=e.BaseState},function(e){c=e.ArrayUtils},function(e){l=e.LevelConfigurationService},function(e){p=e.SelectedItemData},function(e){f=e.GameTool}],execute:function(){o._RF.push({},"bd8d1DuyOhL35QHEbDD9+rS","GameDropBooster",void 0),e("GameDropBooster",function(e){function o(){var t;return(t=e.call(this,o.STATE_NAME)||this)._lvlConf=i(l),t}t(o,e);var u=o.prototype;return u.onEnter=function(){var e=n(r().mark((function e(t){var n,o,i,u,l,m,d,h,v,b,E,g;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.selectedItem.item.IsBooster&&t.currentTool==f.SELECTOR){e.next=2;break}return e.abrupt("return");case 2:for(n=t.currentCluster.length,o=this._lvlConf.drops,i=0,u=0,l=Object.keys(o);u<l.length;u++)m=l[u],(d=parseInt(m))<=n&&d>i&&(i=d);if(null!=(h=c.getRandomItem(o[i]))){e.next=9;break}return e.abrupt("return");case 9:if(null!=(v=this.getCachedDrop(t,h))){e.next=21;break}b=0;case 12:if(!(b<t.dropPrefabs.length)){e.next=21;break}if((E=t.dropPrefabs[b]).name==h){e.next=16;break}return e.abrupt("continue",18);case 16:(v=a(E).getComponent(s.COMPONENT_NAME)).node.on(s.CLICKED_EVENT,(function(e){t.onClickedItemCb(e)}));case 18:b++,e.next=12;break;case 21:(g=new p).position=t.selectedItem.position,g.item=v,t.droppedItems.push(g);case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),u.getCachedDrop=function(e,t){for(var n=0;n<e.dropsPool.length;n++)if(e.dropsPool[n].ItemType==t){var r=e.dropsPool[n];return e.dropsPool.splice(n,1),r}return null},u.onExit=function(){var e=n(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.selectedItem=null;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o}(u)).STATE_NAME="GameDropBooster",o._RF.pop()}}}));

System.register("chunks:///_virtual/GameField.ts",["./rollupPluginModLoBabelHelpers.js","cc","./inject.ts","./GameSM.ts","./UIService.ts","./Paddings.ts"],(function(e){var t,r,i,a,n,o,s,l,c,u,p,d,f,g,h,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,n=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.Prefab,u=e.Node,p=e.CCFloat,d=e.Component},function(e){f=e.inject},function(e){g=e.GameStateMachine},function(e){h=e.UIService},function(e){b=e.Paddings}],execute:function(){var m,y,P,v,w,z,_,k,S,M,T,x,F,G,C,I,N,D,U;s._RF.push({},"4cde4CKP1pOq7oM3do8e5cE","GameField",void 0);var j=l.ccclass,R=l.property;e("GameField",(m=j("GameField"),y=R({type:[c],tooltip:"Prefabs for regular game items that can be placed in the grid"}),P=R({type:[c],tooltip:"Prefabs for game drops that can be placed in the grid"}),v=R({type:u,tooltip:"Container node for the game field UI"}),w=R({type:[u],tooltip:"Array of nodes that should be scaled to fit the game field UI"}),z=R({type:u,tooltip:"Container node for the game field mask"}),_=R({type:p,tooltip:"Padding value for the scale targets"}),k=R({type:b,visible:!0,serializable:!0,tooltip:"Padding values for the game field layout"}),S=R({type:b,visible:!0,serializable:!0,tooltip:"Padding values for the game field mask"}),m((x=t((T=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,i(t,"itemPrefabs",x,a(t)),i(t,"dropPrefabs",F,a(t)),i(t,"targetNode",G,a(t)),i(t,"scaleTargets",C,a(t)),i(t,"maskTarget",I,a(t)),i(t,"scaleTargetsPadding",N,a(t)),i(t,"targetPaddings",D,a(t)),i(t,"maskPaddings",U,a(t)),t._uiService=f(h),t._stateMachine=f(g),t}r(t,e);var s=t.prototype;return s.start=function(){var e=n(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._stateMachine.setItems(this.itemPrefabs),this._stateMachine.setDrops(this.dropPrefabs),null==this.targetNode){e.next=12;break}return e.next=5,this._stateMachine.bind(this.targetNode);case 5:return e.next=7,this._uiService.resetSize([this.targetNode],null);case 7:return e.next=9,this._uiService.resetSize(this.scaleTargets,this.targetPaddings);case 9:return e.next=11,this._uiService.resetSize([this.maskTarget],this.maskPaddings);case 11:return e.abrupt("return");case 12:this._stateMachine.bind(this.node);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.update=function(){var e=n(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._stateMachine.update();case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(d)).prototype,"itemPrefabs",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=t(T.prototype,"dropPrefabs",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=t(T.prototype,"targetNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(T.prototype,"scaleTargets",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=t(T.prototype,"maskTarget",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(T.prototype,"scaleTargetsPadding",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=t(T.prototype,"targetPaddings",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new b}}),U=t(T.prototype,"maskPaddings",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new b}}),M=T))||M));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameFieldItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,r,o,a,s,c,l,u,p,f,m,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,l=e.CCString,u=e.CCBoolean,p=e.Node,f=e.UITransform,m=e.Vec3,d=e.Component,h=e.tween}],execute:function(){var y,I,v,C,b,T,g,w;s._RF.push({},"8d98d+Q6sRGOKwaf6Ix2tOF","GameFieldItem",void 0);var E=c.ccclass,_=c.property;e("GameFieldItem",(y=E("GameFieldItem"),I=_({type:l,tooltip:"The type identifier for this game item"}),v=_({type:u,tooltip:"Indicates if this item is a booster type"}),y(((w=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"ItemType",T,r(t)),i(t,"IsBooster",g,r(t)),t._isInteractable=!0,t}n(t,e);var s=t.prototype;return s.moveToPosition=function(){var e=o(a().mark((function e(t,n,i,r){var o=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=0),e.abrupt("return",new Promise((function(e){h(o.node).delay(r).to(i,{position:new m(t,n,0)}).call((function(){return e()})).start()})));case 2:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}(),s.onLoad=function(){this.node.on(p.EventType.TOUCH_END,this.onClick,this)},s.onClick=function(e){if(this._isInteractable){var n=e.getUILocation(),i=this.node.getComponent(f);if(i){var r=i.convertToNodeSpaceAR(new m(n.x,n.y,0)),o=i.contentSize;Math.abs(r.x)<=o.width/2&&Math.abs(r.y)<=o.height/2&&this.node.emit(t.CLICKED_EVENT,this)}}},t}(d)).COMPONENT_NAME="GameFieldItem",w.CLICKED_EVENT="item-clicked",T=t((b=w).prototype,"ItemType",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=t(b.prototype,"IsBooster",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=b))||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameFillField.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameFieldItem.ts","./BaseState.ts","./ArrayUtils.ts","./inject.ts","./ClusterSeekerService.ts","./FieldCoordinatesService.ts","./LevelConfiguration.ts"],(function(e){var t,r,i,n,o,s,l,a,c,u,f,d;return{setters:[function(e){t=e.inheritsLoose,r=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){n=e.cclegacy,o=e.instantiate},function(e){s=e.GameFieldItem},function(e){l=e.BaseState},function(e){a=e.ArrayUtils},function(e){c=e.inject},function(e){u=e.ClusterSeekerService},function(e){f=e.FieldCoordinatesService},function(e){d=e.LevelConfigurationService}],execute:function(){n._RF.push({},"cc796q82rtBL4fd2hyzr/wc","GameFillField",void 0),e("GameFillField",function(e){function n(){var t;return(t=e.call(this,n.STATE_NAME)||this)._clusterSeeker=c(u),t._coordinatesService=c(f),t._lvlConf=c(d),t}t(n,e);var l=n.prototype;return l.onEnter=function(){var e=r(i().mark((function e(t){var r,n,l,a,c,u,f,d,C,m,h,v,S,p,E;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=t.gameConf,n=t.lvlConf,l=t.gameNode,t.gameScore=r.startPointsAmount,a=t.items,c=0;c<n.width;c++)for(t.items[c]=[],u=0;u<n.height;u++)f=this.createItem(t),t.itemsPool.push(f),d=this.createItem(t),C=this._coordinatesService.fieldToWorldCoordsinates(c,u),d.node.setPosition(C.x,C.y),l.addChild(d.node),a[c][u]=d;for(m=0;m<t.dropPrefabs.length;m++)h=o(t.dropPrefabs[m]),v=h.getComponent(s.COMPONENT_NAME),h.on(s.CLICKED_EVENT,(function(e){t.onClickedItemCb(e)})),t.dropsPool.push(v);if(t.remainClusters=this._clusterSeeker.FindAllClusters(a,r.minClusterSize,s.COMPONENT_NAME),0==t.remainClusters.length){for(;0==t.remainClusters.length&&t.shuffleCounter<=r.reshuffles;)t.shuffleCounter++,t.remainClusters=this._clusterSeeker.FindAllClusters(a,r.minClusterSize,s.COMPONENT_NAME);for(S=0;S<n.width;S++)for(t.items[S]=[],p=0;p<n.height;p++)E=a[S][p],C=this._coordinatesService.fieldToWorldCoordsinates(S,p),E.node.setPosition(C.x,C.y)}case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),l.createItem=function(e,t){void 0===t&&(t=!0);var r=o(a.getRandomItem(e.itemPrefabs)),i=r.getComponent(s.COMPONENT_NAME);return t&&r.on(s.CLICKED_EVENT,(function(t){e.onClickedItemCb(t)})),i},n}(l)).STATE_NAME="GameFillField",n._RF.pop()}}}));

System.register("chunks:///_virtual/GameIdle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseState.ts","./SelectedItemData.ts","./EnumGameTool.ts"],(function(e){var t,n,o,r,c,i,a;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){r=e.cclegacy},function(e){c=e.BaseState},function(e){i=e.SelectedItemData},function(e){a=e.GameTool}],execute:function(){r._RF.push({},"aff97iCuORDL5q47O4JUu9y","GameIdle",void 0),e("GameIdle",function(e){function r(){var t;return(t=e.call(this,r.STATE_NAME)||this)._context=null,t}t(r,e);var c=r.prototype;return c.onEnter=function(){var e=n(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.currentTool=a.SELECTOR,t.skipMove=!1,t.gameNode.on(i.SELECTED_EVENT,this.onItemSelected,this),this._context=t;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.onExit=function(){var e=n(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.gameNode.off(i.SELECTED_EVENT,this.onItemSelected,this);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.onItemSelected=function(e){this._context.selectedItem=e},r}(c)).STATE_NAME="GameIdle",r._RF.pop()}}}));

System.register("chunks:///_virtual/GameLandDrop.ts",["./rollupPluginModLoBabelHelpers.js","cc","./inject.ts","./BaseState.ts","./FieldCoordinatesService.ts"],(function(e){var t,o,n,i,r,s,a;return{setters:[function(e){t=e.inheritsLoose,o=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){i=e.cclegacy},function(e){r=e.inject},function(e){s=e.BaseState},function(e){a=e.FieldCoordinatesService}],execute:function(){i._RF.push({},"8ed41p0EMNAgrOX4MeLuoTT","GameLandDrop",void 0),e("GameLandDrop",function(e){function i(){var t;return(t=e.call(this,i.STATE_NAME)||this)._coordinatesService=r(a),t}t(i,e);var s=i.prototype;return s.onEnter=function(){var e=o(n().mark((function e(t){var o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=0;o<t.droppedItems.length;o++)this.replaceItem(t,t.droppedItems[o]);t.droppedItems=[];case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.replaceItem=function(e,t){var o=e.items[t.position.x][t.position.y];o.node.removeFromParent(),e.itemsPool.push(o),e.items[t.position.x][t.position.y]=t.item;var n=this._coordinatesService.fieldToWorldCoordsinates(t.position.x,t.position.y);t.item.node.setPosition(n.x,n.y),e.gameNode.addChild(t.item.node)},i}(s)).STATE_NAME="GameLandDrop",i._RF.pop()}}}));

System.register("chunks:///_virtual/GameOver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseState.ts"],(function(e){var t,n,r,o,a;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){o=e.cclegacy},function(e){a=e.BaseState}],execute:function(){o._RF.push({},"9770abG+4RK6IkZEiNxoWzu","GameOver",void 0),e("GameOver",function(e){function o(){return e.call(this,o.STATE_NAME)||this}return t(o,e),o.prototype.onEnter=function(){var e=n(r().mark((function e(t){var n,o,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.items,o=0;o<n.length;o++)for(a=0;a<n[o].length;a++)n[o][a]&&(n[o][a].node.removeFromParent(),t.itemsPool.push(n[o][a]),n[o][a]=null);t.gameNode.emit("game-over");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o}(a)).STATE_NAME="GameOver",o._RF.pop()}}}));

System.register("chunks:///_virtual/GameOverWindow.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameContext.ts","./inject.ts"],(function(e){var t,n,i,o,r,a,l,s,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Label,s=e.Component},function(e){c=e.GameContext},function(e){p=e.inject}],execute:function(){var u,m,b,f,g,v,y;r._RF.push({},"022b1cXmD5P5YB2pZXyBdaM","GameOverWindow",void 0);var d=a.ccclass,h=a.property;e("GameOverWindow",(u=d("GameOverWindow"),m=h({type:l,visible:!0,tooltip:"Label component for displaying the final score"}),b=h({type:l,visible:!0,tooltip:"Label component for displaying the number of moves used"}),u((v=t((g=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this)._gameContext=p(c),i(t,"_pointsLbl",v,o(t)),i(t,"_movesLbl",y,o(t)),t}return n(t,e),t.prototype.onEnable=function(){this._pointsLbl.string=this._gameContext.gameScore.toString(),this._movesLbl.string=this._gameContext.gameMoves.toString()},t}(s)).prototype,"_pointsLbl",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(g.prototype,"_movesLbl",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameRefillGrid.ts",["./rollupPluginModLoBabelHelpers.js","cc","./inject.ts","./BaseState.ts","./ArrayUtils.ts","./FieldCoordinatesService.ts"],(function(e){var t,i,n,o,r,s,a,c;return{setters:[function(e){t=e.inheritsLoose,i=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){o=e.cclegacy},function(e){r=e.inject},function(e){s=e.BaseState},function(e){a=e.ArrayUtils},function(e){c=e.FieldCoordinatesService}],execute:function(){o._RF.push({},"9a97cFbf6lCcYhbP9ZAHNjb","GameRefillGrid",void 0),e("GameRefillGrid",function(e){function o(){var t;return(t=e.call(this,o.STATE_NAME)||this)._coordinatesService=r(c),t}return t(o,e),o.prototype.onEnter=function(){var e=i(n().mark((function e(t){var i,o,r,s,c,l,u,d,f,m;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=t.items,o=t.itemsPool,r=t.lvlConf,s=t.gameNode,c=[],t.isMovingItems=!0,l=0;l<r.width;l++)for(u=0;u<r.height;u++)i[l][u]||(d=a.getRandomItem(o),a.removeItem(o,d),i[l][u]=d,f=this._coordinatesService.fieldToWorldCoordsinates(l,u),m=this._coordinatesService.fieldSpawnToWorldCoordsinates(l,u),d.node.setPosition(m.x,m.y),s.addChild(d.node),c.push(d.moveToPosition(f.x,f.y,.1,.08*l)));return e.next=9,Promise.all(c);case 9:t.isMovingItems=!1;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),o}(s)).STATE_NAME="GameRefillGrid",o._RF.pop()}}}));

System.register("chunks:///_virtual/GameRemoveCluster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseState.ts"],(function(e){var t,r,n,o,u,s;return{setters:[function(e){t=e.inheritsLoose,r=e.asyncToGenerator,n=e.regeneratorRuntime,o=e.createForOfIteratorHelperLoose},function(e){u=e.cclegacy},function(e){s=e.BaseState}],execute:function(){u._RF.push({},"d000bmA9slB55MBh/loO07w","GameRemoveCluster",void 0),e("GameRemoveCluster",function(e){function u(){return e.call(this,u.STATE_NAME)||this}return t(u,e),u.prototype.onEnter=function(){var e=r(n().mark((function e(t){var r,u,s,a,c,i,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=t.currentCluster)&&0!==r.length){e.next=3;break}return e.abrupt("return");case 3:u=t.items,s=t.itemsPool,a=t.dropsPool,c=n().mark((function e(){var t,r,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.value,-1!==(r=u.findIndex((function(e){return-1!==e.indexOf(t)})))&&-1!==(o=u[r].indexOf(t))&&(u[r][o]=null,t.node.removeFromParent(),t.IsBooster?a.push(t):s.push(t));case 3:case"end":return e.stop()}}),e)})),i=o(r);case 8:if((l=i()).done){e.next=12;break}return e.delegateYield(c(),"t0",10);case 10:e.next=8;break;case 12:t.currentCluster=null;case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u}(s)).STATE_NAME="GameRemoveCluster",u._RF.pop()}}}));

System.register("chunks:///_virtual/GameReshuffleField.ts",["./rollupPluginModLoBabelHelpers.js","cc","./inject.ts","./BaseState.ts","./FieldCoordinatesService.ts"],(function(e){var t,n,r,i,o,s,u;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){i=e.cclegacy},function(e){o=e.inject},function(e){s=e.BaseState},function(e){u=e.FieldCoordinatesService}],execute:function(){i._RF.push({},"897d8yx8EVIzJDR4ft8EzdO","GameReshuffleField",void 0),e("GameReshuffleField",function(e){function i(){var t;return(t=e.call(this,i.STATE_NAME)||this)._coordinatesService=o(u),t}t(i,e);var s=i.prototype;return s.onEnter=function(){var e=n(r().mark((function e(t){var n,i,o,s,u,c,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.isMovingItems=!0,n=t.items,i=[],o=t.lvlConf,t.items.shuffle2D(),s=0;s<o.width;s++)for(u=0;u<o.height;u++)c=n[s][u],a=this._coordinatesService.fieldToWorldCoordsinates(s,u),i.push(c.moveToPosition(a.x,a.y,1));return e.next=8,Promise.all(i);case 8:t.isMovingItems=!1;case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.onExit=function(){var e=n(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.shuffleCounter++;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i}(s)).STATE_NAME="GameReshuffleField",i._RF.pop()}}}));

System.register("chunks:///_virtual/GameSearchCluster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./inject.ts","./BaseState.ts","./ClusterSeekerService.ts"],(function(e){var t,r,n,s,u,c,i;return{setters:[function(e){t=e.inheritsLoose,r=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){s=e.cclegacy},function(e){u=e.inject},function(e){c=e.BaseState},function(e){i=e.ClusterSeekerService}],execute:function(){s._RF.push({},"af425yXHylFe5expSo+5rV0","GameSearchCluster",void 0),e("GameSearchCluster",function(e){function s(){var t;return(t=e.call(this,s.STATE_NAME)||this)._clusterSeeker=u(i),t}return t(s,e),s.prototype.onEnter=function(){var e=r(n().mark((function e(t){var r,s,u,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.gameConf,s=t.selectedItem,u=t.items,!s.item.IsBooster){e.next=6;break}return t.currentCluster=[s.item],e.abrupt("return");case 6:(c=this._clusterSeeker.CollectCluster(u,r.minClusterSize,s.position.x,s.position.y,"ItemType")).length>=r.minClusterSize?t.currentCluster=c:t.selectedItem=null;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s}(c)).STATE_NAME="GameSearchCluster",s._RF.pop()}}}));

System.register("chunks:///_virtual/GameSM.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singleton.ts","./inject.ts","./FiniteStateMachine.ts","./GameContext.ts","./GameFillField.ts","./GameIdle.ts","./SelectedItemData.ts","./GameSearchCluster.ts","./GameRemoveCluster.ts","./GameCollapseField.ts","./GameRefillGrid.ts","./GameCollectAllClusters.ts","./GameReshuffleField.ts","./GameOver.ts","./GameCalculateScore.ts","./EnumGameTool.ts","./GameBombActivation.ts","./GameDropBooster.ts","./GameLandDrop.ts","./NukeBombActivated.ts","./Column1RocketActivated.ts","./Column2RocketActivated.ts","./Row1RocketActivated.ts","./Row2RocketActivated.ts"],(function(t){var e,n,i,o,r,a,s,d,u,T,c,E,f,l,A,m,h,S,M,_,N,C,p,R,g,v,G,w,I;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){o=t.cclegacy,r=t.Vec2},function(t){a=t.singleton},function(t){s=t.inject},function(t){d=t.FiniteStateMachine},function(t){u=t.GameContext},function(t){T=t.GameFillField},function(t){c=t.GameIdle},function(t){E=t.SelectedItemData},function(t){f=t.GameSearchCluster},function(t){l=t.GameRemoveCluster},function(t){A=t.GameCollapseField},function(t){m=t.GameRefillGrid},function(t){h=t.GameCollectAllClusters},function(t){S=t.GameReshuffleField},function(t){M=t.GameOver},function(t){_=t.GameCalculateScore},function(t){N=t.GameTool},function(t){C=t.GameBombActivation},function(t){p=t.GameDropBooster},function(t){R=t.GameLandDrop},function(t){g=t.NukeBombActivated},function(t){v=t.Column1RocketActivated},function(t){G=t.Column2RocketActivated},function(t){w=t.Row1RocketActivated},function(t){I=t.Row2RocketActivated}],execute:function(){var O;o._RF.push({},"200aecJho9Onrs1efGOisrS","GameSM",void 0);t("GameStateMachine",a()(O=function(t){function o(){var e=s(u);return t.call(this,e)||this}e(o,t);var a=o.prototype;return a.setItems=function(t){if(null!=this.context.itemPrefabs)throw new Error("Items already set");this.context.itemPrefabs=t},a.setDrops=function(t){if(null!=this.context.dropPrefabs)throw new Error("Drops already set");this.context.dropPrefabs=t},a.setupStates=function(){var t=n(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.addState(new T),this.addState(new c),this.addState(new f),this.addState(new l),this.addState(new A),this.addState(new m),this.addState(new h),this.addState(new S),this.addState(new M),this.addState(new _),this.addState(new C),this.addState(new p),this.addState(new R),this.addState(new g),this.addState(new v),this.addState(new G),this.addState(new w),this.addState(new I);case 18:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.setupTransitions=function(){var t=n(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.addTransition({from:T.STATE_NAME,to:c.STATE_NAME,guardCondition:function(t){return 0==t.needReshuffle&&t.items.length>0&&t.itemsPool.length>0&&null!=t.gameNode}}),this.addTransition({from:T.STATE_NAME,to:M.STATE_NAME,guardCondition:function(t){return 1==t.needReshuffle&&0==t.canReshuffle}}),this.addTransition({from:c.STATE_NAME,to:f.STATE_NAME,guardCondition:function(t){return null!=t.selectedItem&&t.currentTool==N.SELECTOR&&!t.selectedItem.item.IsBooster}}),this.addTransition({from:c.STATE_NAME,to:C.STATE_NAME,guardCondition:function(t){return null!=t.selectedItem&&(t.currentTool==N.BOMB_1||t.currentTool==N.BOMB_2)}}),this.addTransition({from:c.STATE_NAME,to:g.STATE_NAME,guardCondition:function(t){return null!=t.selectedItem&&t.currentTool==N.SELECTOR&&t.selectedItem.item.ItemType==N.NUKE_BOMB}}),this.addTransition({from:g.STATE_NAME,to:_.STATE_NAME}),this.addTransition({from:c.STATE_NAME,to:w.STATE_NAME,guardCondition:function(t){return null!=t.selectedItem&&t.currentTool==N.SELECTOR&&t.selectedItem.item.ItemType==N.ROW_ROCKET_1}}),this.addTransition({from:c.STATE_NAME,to:I.STATE_NAME,guardCondition:function(t){return null!=t.selectedItem&&t.currentTool==N.SELECTOR&&t.selectedItem.item.ItemType==N.ROW_ROCKET_2}}),this.addTransition({from:c.STATE_NAME,to:v.STATE_NAME,guardCondition:function(t){return null!=t.selectedItem&&t.currentTool==N.SELECTOR&&t.selectedItem.item.ItemType==N.COL_ROCKET_1}}),this.addTransition({from:c.STATE_NAME,to:G.STATE_NAME,guardCondition:function(t){return null!=t.selectedItem&&t.currentTool==N.SELECTOR&&t.selectedItem.item.ItemType==N.COL_ROCKET_2}}),this.addTransition({from:w.STATE_NAME,to:_.STATE_NAME}),this.addTransition({from:I.STATE_NAME,to:_.STATE_NAME}),this.addTransition({from:v.STATE_NAME,to:_.STATE_NAME}),this.addTransition({from:G.STATE_NAME,to:_.STATE_NAME}),this.addTransition({from:C.STATE_NAME,to:_.STATE_NAME,guardCondition:function(t){return!t.skipMove}}),this.addTransition({from:C.STATE_NAME,to:c.STATE_NAME,guardCondition:function(t){return t.skipMove}}),this.addTransition({from:c.STATE_NAME,to:M.STATE_NAME,guardCondition:function(t){return t.outOfMoves||t.pointTargetReached}}),this.addTransition({from:f.STATE_NAME,to:c.STATE_NAME,guardCondition:function(t){return null==t.currentCluster}}),this.addTransition({from:f.STATE_NAME,to:_.STATE_NAME,guardCondition:function(t){return null!=t.currentCluster}}),this.addTransition({from:_.STATE_NAME,to:p.STATE_NAME}),this.addTransition({from:p.STATE_NAME,to:l.STATE_NAME}),this.addTransition({from:l.STATE_NAME,to:A.STATE_NAME,guardCondition:function(t){return null==t.currentCluster}}),this.addTransition({from:A.STATE_NAME,to:m.STATE_NAME,guardCondition:function(t){return 0==t.isMovingItems}}),this.addTransition({from:m.STATE_NAME,to:h.STATE_NAME,guardCondition:function(t){return 0==t.isMovingItems&&0==t.droppedItems.length}}),this.addTransition({from:m.STATE_NAME,to:R.STATE_NAME,guardCondition:function(t){return 0==t.isMovingItems&&0!=t.droppedItems.length}}),this.addTransition({from:R.STATE_NAME,to:h.STATE_NAME}),this.addTransition({from:h.STATE_NAME,to:S.STATE_NAME,guardCondition:function(t){return t.needReshuffle&&1==t.canReshuffle}}),this.addTransition({from:S.STATE_NAME,to:h.STATE_NAME,guardCondition:function(t){return t.needReshuffle&&1==t.canReshuffle}}),this.addTransition({from:h.STATE_NAME,to:c.STATE_NAME,guardCondition:function(t){return 0==t.needReshuffle&&1==t.canReshuffle}}),this.addTransition({from:S.STATE_NAME,to:M.STATE_NAME,guardCondition:function(t){return t.needReshuffle&&0==t.canReshuffle}}),this.addTransition({from:S.STATE_NAME,to:c.STATE_NAME,guardCondition:function(t){return 0==t.needReshuffle&&1==t.canReshuffle}}),t.next=33,this.setInitialState(T.STATE_NAME);case 33:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.bind=function(){var t=n(i().mark((function t(e){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.context.gameNode=e,t.next=3,this.setupStates();case 3:return t.next=5,this.setupTransitions();case 5:this.context.onClickedItemCb=this.onItemClicked.bind(this);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),a.unbind=function(){this.context.gameNode=null},a.onItemClicked=function(t){for(var e=0;e<this.context.items.length;e++)for(var n=0;n<this.context.items[e].length;n++)if(this.context.items[e][n]===t){var i=new E;i.position=new r(e,n),i.item=t,this.context.gameNode.emit(E.SELECTED_EVENT,i)}},o}(d))||O);o._RF.pop()}}}));

System.register("chunks:///_virtual/IClusterSeekerService.ts",["cc"],(function(){var e;return{setters:[function(r){e=r.cclegacy}],execute:function(){e._RF.push({},"30f4fe1wX9JxYHqRwSHYDfB","IClusterSeekerService",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IGameConfigurationService.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"7275c2aZN5ORpeRHH42xytb","IGameConfigurationService",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IGameContext.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"0ae95D72TxA2YO2G39hI9+J","IGameContext",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IGameStateObserver.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"78af0Jq+StFybjkJ3cn7tjZ","IGameStateObserver",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IGameStatsObserver.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"ed3beFNLBNNoamkOCxvW5ds","IGameStatsObserver",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IGameToolObserver.ts",["cc"],(function(){var e;return{setters:[function(r){e=r.cclegacy}],execute:function(){e._RF.push({},"0bb10qnXfpF766bsMjAFR0r","IGameToolObserver",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IGuard.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"53fc8GWanVB/It4xKI7a2WH","IGuard",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/IGuarded.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"1ff2djjkM9I0Yp6wkliRYL9","IGuarded",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IInjectable.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"5ffbfVeUEJCvJwbXlfFqKh3","IInjectable",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/ILevelConfiguration.ts",["cc"],(function(){var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"7d237KjPKpNf7rzWiMOdX5n","ILevelConfiguration",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IMapping.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"e6e3dudqgNP64RzKTxBGVU6","IMapping",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/inject.ts",["cc","./Kernel.ts"],(function(e){var n,t;return{setters:[function(e){n=e.cclegacy},function(e){t=e.Kernel}],execute:function(){e("inject",(function(e){return c.get(e)})),n._RF.push({},"8c7b7m0TdtBJYNM2KuFi1Vr","inject",void 0);var c=e("kernel",new t);n._RF.pop()}}}));

System.register("chunks:///_virtual/injectable.ts",["cc","./InjectionMapping.ts","./dependency-injection.ts"],(function(n){var e,t,c;return{setters:[function(n){e=n.cclegacy},function(n){t=n.InjectionMapping},function(n){c=n.classMap}],execute:function(){n("injectable",(function(){return function(n){c.get(n)||new t(c,n)}})),e._RF.push({},"a5010v41oNMoZjdMLSaCQN9","injectable",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/InjectionMapping.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Mapping.ts"],(function(n){var t,e,i,s;return{setters:[function(n){t=n.inheritsLoose,e=n.construct},function(n){i=n.cclegacy},function(n){s=n.Mapping}],execute:function(){i._RF.push({},"082277rfzRPa5cmLyZdfSrE","InjectionMapping",void 0);n("InjectionMapping",function(n){function i(t,e){var i;return(i=n.call(this)||this).instance=null,i.isSingleton=!1,i._instanceResultConstructor=null,i.args=[],i._isForceCreation=!1,i.classesMap=t,i.to(e),i}t(i,n);var s=i.prototype;return s.getInstance=function(){return this.isSingleton?(this.instance||(this.instance=this.createInstance()),this.instance):this.createInstance()},s.createInstance=function(){var n=this.getConstructor();return e(n,this.args)},s.getConstructor=function(){if(this._instanceResultConstructor)return this._instanceResultConstructor;throw new Error("Constructor is not bound!")},s.hasInstance=function(){return!!this.instance&&this.isSingleton},s.destroyInstance=function(){this.instance=null},s.asSingleton=function(){return this.isSingleton=!0,this},s.to=function(n){if(!n)throw new Error("There is an undefined constructor you are trying bind to.");var t=this.existentialType(this);return this.classesMap.get(n)&&console.warn("Constructor already bound "+n.name),t._instanceResultConstructor=n,t.instance=null,this.classesMap.add(n,this),t},s.isForceCreation=function(){return this._isForceCreation},s.forceCreation=function(){return this._isForceCreation=!0,this},s.existentialType=function(n){return n},i}(s));i._RF.pop()}}}));

System.register("chunks:///_virtual/IPlayerInventoryObserver.ts",["cc"],(function(){var e;return{setters:[function(r){e=r.cclegacy}],execute:function(){e._RF.push({},"3fe90dKFFJLE5Te8ww21lPP","IPlayerInventoryObserver",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IPlayerInventoryService.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"ca655JZ57FD1IjlR0heqUAA","IPlayerInventoryService",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/ISelectedItemData.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"11649+g4EFIVrm4dIkC0eWB","ISelectedItemData",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/IState.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"f5a15v5QVxC04cmPQZMf+fV","IState",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/ITransition.ts",["cc"],(function(){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"5b403fr4+lHlZk7Q+kjNhhb","ITransition",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/IUIService.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"84b6dBgCNJDSInoMPqERhwg","IUIService",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Kernel.ts",["cc","./InjectionMapping.ts","./dependency-injection.ts"],(function(n){var t,e,r;return{setters:[function(n){t=n.cclegacy},function(n){e=n.InjectionMapping},function(n){r=n.classMap}],execute:function(){t._RF.push({},"a62918MeB1FyqtxLIsiKtcg","Kernel",void 0);n("Kernel",function(){function n(){}var t=n.prototype;return t.bind=function(n){var t=this.getBinding(n);return t||(t=new e(r,n)),t},t.get=function(n){var t=r.get(n);if(!t)throw new Error("There is no any binding for "+n+" please bind the class before inject()");return t.getInstance()},t.getBinding=function(n){if(!n)throw Error("you are trying to get undefined constructor");return r.get(n)},t.activate=function(){var n=[];r.forEach((function(t){return n.push(t)})),n.forEach((function(n){n.isForceCreation()&&n.getInstance()}))},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/LevelConfiguration.ts",["./rollupPluginModLoBabelHelpers.js","cc","./singleton.ts"],(function(t){var e,i,n;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy},function(t){n=t.singleton}],execute:function(){var r;i._RF.push({},"c2dffOSp1BP97XuMJvEN8s4","LevelConfiguration",void 0);t("LevelConfigurationService",n()(r=function(){function t(){this._width=10,this._height=10,this._cellWidth=171,this._cellHeight=192,this._paytable={BlueItem:10,GreenItem:20,PurpleItem:30,RedItem:40,YellowItem:50,COL_ROCKET_1:60,ROW_ROCKET_1:60,COL_ROCKET_2:60,ROW_ROCKET_2:60,NUKE_BOMB:100},this._drops={6:["COL_ROCKET_1","ROW_ROCKET_1"],7:["COL_ROCKET_2","ROW_ROCKET_2"],8:["NUKE_BOMB"]},this._maxMoves=15,this._targetScore=15500,this._bombRadius={BOMB_1:1,BOMB_2:2}}return e(t,[{key:"drops",get:function(){return this._drops}},{key:"bombRadius",get:function(){return this._bombRadius}},{key:"maxMoves",get:function(){return this._maxMoves}},{key:"targetScore",get:function(){return this._targetScore}},{key:"paytable",get:function(){return this._paytable}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"cellWidth",get:function(){return this._cellWidth}},{key:"cellHeight",get:function(){return this._cellHeight}}]),t}())||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./ISelectedItemData.ts","./SelectedItemData.ts","./EnumGameTool.ts","./GameContext.ts","./GameSM.ts","./Column1RocketActivated.ts","./Column2RocketActivated.ts","./NukeBombActivated.ts","./Row1RocketActivated.ts","./Row2RocketActivated.ts","./GameBombActivation.ts","./GameCalculateScore.ts","./GameCollapseField.ts","./GameCollectAllClusters.ts","./GameDropBooster.ts","./GameFillField.ts","./GameIdle.ts","./GameLandDrop.ts","./GameOver.ts","./GameRefillGrid.ts","./GameRemoveCluster.ts","./GameReshuffleField.ts","./GameSearchCluster.ts","./IGameContext.ts","./IGameStateObserver.ts","./IGameStatsObserver.ts","./IGameToolObserver.ts","./GameField.ts","./GameFieldItem.ts","./ArrayExtension.ts","./InjectionMapping.ts","./Kernel.ts","./injectable.ts","./singleton.ts","./dependency-injection.ts","./inject.ts","./IGuard.ts","./IGuarded.ts","./IInjectable.ts","./IMapping.ts","./Dictionary.ts","./Mapping.ts","./Type.ts","./UniqueUtils.ts","./BaseState.ts","./FiniteStateMachine.ts","./IState.ts","./ITransition.ts","./ArrayUtils.ts","./TimeoutUtils.ts","./ClusterSeekerService.ts","./FieldCoordinatesService.ts","./GameConfigurationService.ts","./IClusterSeekerService.ts","./IGameConfigurationService.ts","./ILevelConfiguration.ts","./IPlayerInventoryObserver.ts","./IPlayerInventoryService.ts","./IUIService.ts","./LevelConfiguration.ts","./PlayerInventoryService.ts","./UIService.ts","./GameOverWindow.ts","./Paddings.ts","./ToolController.ts","./ToolSelector.ts","./ToolSwitcherButton.ts","./ToolToggleButton.ts","./UserHud.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Mapping.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t;return{setters:[function(e){r=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"250f36yUtJPe4R3RWY0HezN","Mapping",void 0);e("Mapping",function(){function e(){this.guards=[],this.executeOnce=!1}var t=e.prototype;return t.isOnce=function(){return this.executeOnce},t.once=function(){return this.executeOnce=!0,this},t.withGuards=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return Array.prototype.push.apply(this.guards,r),this},t.executionAllowedByGuards=function(e){for(var t,n=r(this.guards);!(t=n()).done;){if(!(0,t.value)(e))return!1}return!0},t.createFilter=function(t){if(!t)return{};for(var n,u={},i=e.extractAllProperties(this),o=r(i);!(n=o()).done;){var c=n.value;c in t&&typeof this[c]==typeof t[c]&&(u[c]=t[c])}return u},e.extractAllProperties=function(e){var r=[];for(var t in e)e.hasOwnProperty(t)&&"guards"!==t&&"executeOnce"!==t&&r.push(t);return r},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/NukeBombActivated.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseState.ts"],(function(t){var e,n,r,o,u;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy},function(t){u=t.BaseState}],execute:function(){o._RF.push({},"4f425CXKDpJOJNI4aApNcs4","NukeBombActivated",void 0),t("NukeBombActivated",function(t){function o(){return t.call(this,o.STATE_NAME)||this}return e(o,t),o.prototype.onEnter=function(){var t=n(r().mark((function t(e){var n,o,u,c;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=e.items,o=[],u=0;u<n.length;u++)for(c=0;c<n[u].length;c++)o.push(n[u][c]);e.currentCluster=o;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o}(u)).STATE_NAME="NukeBombActivated",o._RF.pop()}}}));

System.register("chunks:///_virtual/Paddings.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,r,n;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.createClass,o=t.initializerDefineProperty},function(t){r=t.cclegacy,n=t._decorator}],execute:function(){var l,s,a,u,h,f,c,p,b,g,d;r._RF.push({},"4ef73jLE2xJNrnq71qkCKy0","Paddings",void 0);var _=n.ccclass,m=n.property;t("Paddings",(l=_("Paddings"),s=m({visible:!0,serializable:!0,tooltip:"Padding value for the left side of the UI element"}),a=m({visible:!0,serializable:!0,tooltip:"Padding value for the bottom side of the UI element"}),u=m({visible:!0,serializable:!0,tooltip:"Padding value for the right side of the UI element"}),h=m({visible:!0,serializable:!0,tooltip:"Padding value for the top side of the UI element"}),l((p=e((c=function(){function t(){o(this,"_left",p,this),o(this,"_bottom",b,this),o(this,"_right",g,this),o(this,"_top",d,this),this.left=0,this.right=0,this.top=0,this.bottom=0}return t.prototype.clone=function(){var e=new t;return e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e},i(t,[{key:"left",get:function(){return this._left},set:function(t){this._left=t}},{key:"right",get:function(){return this._right},set:function(t){this._right=t}},{key:"top",get:function(){return this._top},set:function(t){this._top=t}},{key:"bottom",get:function(){return this._bottom},set:function(t){this._bottom=t}}]),t}()).prototype,"_left",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=e(c.prototype,"_bottom",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),g=e(c.prototype,"_right",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=e(c.prototype,"_top",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=c))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerInventoryService.ts",["cc","./EnumGameTool.ts","./singleton.ts"],(function(t){var e,n,s;return{setters:[function(t){e=t.cclegacy},function(t){n=t.GameTool},function(t){s=t.singleton}],execute:function(){var o;e._RF.push({},"e46a5HbGu1PJKZ8TW/r7qD2","PlayerInventoryService",void 0);t("PlayerInventoryService",s()(o=function(){function t(){this._items=new Map,this._observers=new Set,this._items.set(n.BOMB_1,10),this._items.set(n.BOMB_2,5)}var e=t.prototype;return e.addObserver=function(t){this._observers.add(t),this._items.forEach((function(e,n){t.onInventoryChanged(n,e)}))},e.removeObserver=function(t){this._observers.delete(t)},e.getAmount=function(t){return this._items.get(t)||0},e.setAmount=function(t,e){this._items.set(t,e),this.notifyObservers(t,e)},e.addAmount=function(t,e){var n=this.getAmount(t);this.setAmount(t,n+e)},e.removeAmount=function(t,e){var n=this.getAmount(t);return n>=e&&(this.setAmount(t,n-e),!0)},e.notifyObservers=function(t,e){this._observers.forEach((function(n){n.onInventoryChanged(t,e)}))},t}())||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/Row1RocketActivated.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseState.ts"],(function(t){var e,n,r,o,c;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy},function(t){c=t.BaseState}],execute:function(){o._RF.push({},"81165tLPbBLRJXnxcQYb/3F","Row1RocketActivated",void 0),t("Row1RocketActivated",function(t){function o(){return t.call(this,o.STATE_NAME)||this}return e(o,t),o.prototype.onEnter=function(){var t=n(r().mark((function t(e){var n,o,c,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=e.items,o=[],c=e.selectedItem.position.y,i=0;i<n.length;i++)n[i][c]&&o.push(n[i][c]);e.currentCluster=o;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o}(c)).STATE_NAME="Row1RocketActivated",o._RF.pop()}}}));

System.register("chunks:///_virtual/Row2RocketActivated.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseState.ts"],(function(t){var e,n,r,o,c;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){o=t.cclegacy},function(t){c=t.BaseState}],execute:function(){o._RF.push({},"98a07oqtrVN/Jf50JZlcsyF","Row2RocketActivated",void 0),t("Row2RocketActivated",function(t){function o(){return t.call(this,o.STATE_NAME)||this}return e(o,t),o.prototype.onEnter=function(){var t=n(r().mark((function t(e){var n,o,c,i,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=e.items,o=[],c=e.selectedItem.position.y,i=0;i<n.length;i++)for(s=Math.max(0,c-1);s<=Math.min(c+1,n[i].length-1);s++)n[i][s]&&o.push(n[i][s]);e.currentCluster=o;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o}(c)).STATE_NAME="Row2RocketActivated",o._RF.pop()}}}));

System.register("chunks:///_virtual/SelectedItemData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"74718TJY/RFEpisMyYdIq9Q","SelectedItemData",void 0),t("SelectedItemData",function(){function t(){this._position=null,this._item=null}return e(t,[{key:"position",get:function(){return this._position},set:function(t){this._position=t}},{key:"item",get:function(){return this._item},set:function(t){this._item=t}}]),t}()).SELECTED_EVENT="game-item-selected",i._RF.pop()}}}));

System.register("chunks:///_virtual/singleton.ts",["cc","./injectable.ts","./dependency-injection.ts"],(function(n){var t,e,c;return{setters:[function(n){t=n.cclegacy},function(n){e=n.injectable},function(n){c=n.classMap}],execute:function(){n("singleton",(function(){return function(n){e()(n),c.get(n).asSingleton()}})),t._RF.push({},"8ac08EEguhNxYRLAGreVS9f","singleton",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/TimeoutUtils.ts",["cc"],(function(t){var e,i;return{setters:[function(t){e=t.cclegacy,i=t.tween}],execute:function(){e._RF.push({},"b4ccc2GSfBK261SrMwSFB5e","TimeoutUtils",void 0);var n=t("TimeoutUtils",function(){function t(){}return t.wait=function(e){return new Promise((function(i){t.setTimeout((function(){i()}),e)}))},t.setTimeout=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];var a=this.getId(),c=i({time:0}).by(e/1e3,{time:100}),u=i().call((function(){t(r)}));return c.then(u).start(),this.timers[a]=c,a},t.isActive=function(t){return void 0!==this.timers[t]},t.clearTimeout=function(t){this.clearById(t)},t.setInterval=function(t,e){for(var i=this.getId(),n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];var a=this.getIntervalTween(e,t,i,r);return this.timers[i]=a,i},t.clearInterval=function(t){this.clearById(t)},t.clearById=function(t){if(isNaN(t))console.warn("TimeoutUtils: check timeout/interval id. id = "+t);else{var e=this.timers[t];e&&(e.stop(),delete this.timers[t])}},t.getId=function(){return this.maxInteger=this.maxInteger||Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,this.lastId>=this.maxInteger-1&&(this.lastId=0),++this.lastId},t.getIntervalTween=function(e,n,r,s){var a=this,c=i({time:0}).by(e/1e3,{time:100}),u=i().call((function(){n(s),a.timers[r]&&(t.getIntervalTween(e,n,r,s),a.timers[r]=c)}));return c.then(u).start(),c},t}());n.lastId=0,n.maxInteger=void 0,n.timers={},e._RF.pop()}}}));

System.register("chunks:///_virtual/ToolController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameContext.ts","./inject.ts","./EnumGameTool.ts"],(function(o){var t,n,e,r,c,l,i;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,e=o._decorator,r=o.Component},function(o){c=o.GameContext},function(o){l=o.inject},function(o){i=o.GameTool}],execute:function(){var u;n._RF.push({},"d086d78lytCurMoYzS8TZaN","ToolController",void 0);var a=e.ccclass;o("ToolController",a("ToolController")(u=function(o){function n(){for(var t,n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return(t=o.call.apply(o,[this].concat(e))||this)._gameContext=l(c),t}t(n,o);var e=n.prototype;return e.onBombClick=function(){this._gameContext.currentTool=this._gameContext.currentTool==i.BOMB_1?i.SELECTOR:i.BOMB_1},e.onBigBombClick=function(){this._gameContext.currentTool=this._gameContext.currentTool==i.BOMB_2?i.SELECTOR:i.BOMB_2},n}(r))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/ToolSelector.ts",["./rollupPluginModLoBabelHelpers.js","cc","./inject.ts","./EnumGameTool.ts","./PlayerInventoryService.ts","./ToolToggleButton.ts"],(function(o){var e,t,n,i,r,l,s,g,c,u,b;return{setters:[function(o){e=o.applyDecoratedDescriptor,t=o.inheritsLoose,n=o.initializerDefineProperty,i=o.assertThisInitialized},function(o){r=o.cclegacy,l=o._decorator,s=o.Component},function(o){g=o.inject},function(o){c=o.GameTool},function(o){u=o.PlayerInventoryService},function(o){b=o.ToolToggleButton}],execute:function(){var a,T,m,p,B,_,f;r._RF.push({},"a9a04N4X/5F1qbrI9sG9Tex","ToolSelector",void 0);var h=l.ccclass,v=l.property;o("ToolSelector",(a=h("ToolSelector"),T=v({type:b,tooltip:"Bomb button",visible:!0}),m=v({type:b,tooltip:"Big bomb button",visible:!0}),a((_=e((B=function(o){function e(){for(var e,t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];return(e=o.call.apply(o,[this].concat(r))||this)._inventory=g(u),n(e,"_bombToggle",_,i(e)),n(e,"_bigBombToggle",f,i(e)),e}t(e,o);var r=e.prototype;return r.start=function(){this._inventory.addObserver(this)},r.onInventoryChanged=function(o,e){o===c.BOMB_1&&this._bombToggle.setText(""+e),o===c.BOMB_2&&this._bigBombToggle.setText(""+e)},r.onBombToggled=function(){if(this._inventory.getAmount(c.BOMB_1)<=0)return console.error("Not enough bombs"),void(this._bombToggle.isOn=!1)},r.onBigBombToggled=function(){if(this._inventory.getAmount(c.BOMB_1)<=0)return console.error("Not enough bombs"),void(this._bombToggle.isOn=!1)},r.onToolChanged=function(o){this._bombToggle.isOn=o==c.BOMB_1,this._bigBombToggle.isOn=o==c.BOMB_2},e}(s)).prototype,"_bombToggle",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=e(B.prototype,"_bigBombToggle",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=B))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/ToolSwitcherButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameContext.ts","./inject.ts","./ToolToggleButton.ts"],(function(t){var o,n,e,c,r,i;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator},function(t){c=t.GameContext},function(t){r=t.inject},function(t){i=t.ToolToggleButton}],execute:function(){var l;n._RF.push({},"378ddbSiC1E7oZZmfBp10hJ","ToolSwitcherButton",void 0);var u=e.ccclass;t("ToolSwitcherButton",u("ToolSwitcherButton")(l=function(t){function n(){for(var o,n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return(o=t.call.apply(t,[this].concat(e))||this)._context=r(c),o}o(n,t);var e=n.prototype;return e.onLoad=function(){t.prototype.onLoad.call(this),this._context.addToolObserver(this)},e.onToolChanged=function(t){this.isOn=t==this.toggleValue()},e.toggleValue=function(){throw new Error("Method not implemented.")},n}(i))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/ToolToggleButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameContext.ts","./inject.ts","./PlayerInventoryService.ts"],(function(t){var e,n,i,o,r,l,s,a,u,h,c,p,g,b,f,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){l=t.cclegacy,s=t._decorator,a=t.Sprite,u=t.CCBoolean,h=t.Label,c=t.EventHandler,p=t.Node,g=t.Component},function(t){b=t.GameContext},function(t){f=t.inject},function(t){d=t.PlayerInventoryService}],execute:function(){var y,_,v,T,O,E,m,C,S,w,x,z,B,D,F,I,N,L,G;l._RF.push({},"c8967GXnGZJp7+x6bQoQxbN","ToolToggleButton",void 0);var H=s.ccclass,P=s.property;t("ToolToggleButton",(y=H("ToggleButton"),_=P({type:a,tooltip:"Sprite to display when the toggle is in ON state"}),v=P({type:a,tooltip:"Sprite to display when the toggle is in OFF state"}),T=P({type:u,tooltip:"Current state of the toggle button (ON/OFF)"}),O=P({type:u,tooltip:"Whether the toggle button is enabled and can be interacted with"}),E=P({type:h,tooltip:"Label component for displaying the amount of available tools"}),m=P({tooltip:"The type of tool this button controls",visible:!0}),C=P({type:[c],tooltip:"Event handlers to be called when the toggle state changes"}),S=P({type:[c],tooltip:"Event handlers to be called when the enabled state changes"}),y((z=e((x=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))||this)._gameContext=f(b),e._playerInventory=f(d),i(e,"onSprite",z,o(e)),i(e,"offSprite",B,o(e)),i(e,"_isOn",D,o(e)),i(e,"_isEnabled",F,o(e)),i(e,"label",I,o(e)),i(e,"_tool",N,o(e)),i(e,"onToggleChanged",L,o(e)),i(e,"onEnabledChanged",G,o(e)),e}n(e,t);var l=e.prototype;return l.setText=function(t){this.label&&(this.label.string=t)},l.onToolChanged=function(t){this._isOn=t==this._tool,this.updateVisuals()},l.onLoad=function(){this._gameContext.addToolObserver(this),this._playerInventory.addObserver(this),this.node.on(p.EventType.TOUCH_END,this.onTouchEnd,this),this.updateVisuals()},l.onDestroy=function(){this._gameContext.removeToolObserver(this),this.node.off(p.EventType.TOUCH_END,this.onTouchEnd,this)},l.onTouchEnd=function(){this._isEnabled&&this.toggle()},l.toggle=function(){this.isOn=!this._isOn},l.updateVisuals=function(){this.onSprite&&this.offSprite&&(this.onSprite.node.active=this._isOn&&this._isEnabled,this.offSprite.node.active=!this._isOn&&this._isEnabled)},l.notifyToggleObservers=function(){c.emitEvents(this.onToggleChanged,this,this._isOn)},l.onInventoryChanged=function(t,e){t==this._tool&&this.setText(e.toString())},r(e,[{key:"isOn",get:function(){return this._isOn},set:function(t){this._isOn!==t&&this._isEnabled&&(this._isOn=t,this.updateVisuals(),this.notifyToggleObservers())}},{key:"isEnabled",get:function(){return this._isEnabled}}]),e}(g)).prototype,"onSprite",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(x.prototype,"offSprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(x.prototype,"_isOn",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=e(x.prototype,"_isEnabled",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),I=e(x.prototype,"label",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(x.prototype,"_tool",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),L=e(x.prototype,"onToggleChanged",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=e(x.prototype,"onEnabledChanged",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=x))||w));l._RF.pop()}}}));

System.register("chunks:///_virtual/Type.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"82d829Y5zBL6JOyii5iNjq2","Type",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/UIService.ts",["./rollupPluginModLoBabelHelpers.js","cc","./injectable.ts","./inject.ts","./LevelConfiguration.ts","./Paddings.ts"],(function(e){var t,n,r,i,c,o,u,a,s;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){r=e.cclegacy,i=e._decorator,c=e.UITransform},function(e){o=e.injectable},function(e){u=e.inject},function(e){a=e.LevelConfigurationService},function(e){s=e.Paddings}],execute:function(){var l;r._RF.push({},"5d23bXr6m9OWZ1z/6lY+EdH","UIService",void 0);var f=i.ccclass;i.property,e("UIService",o()(l=f("UIService")(l=function(){function e(){this.lvlConf=u(a)}return e.prototype.resetSize=function(){var e=t(n().mark((function e(t,r){var i,o,u,a,l,f,p,v;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&0!==t.length){e.next=2;break}return e.abrupt("return");case 2:i=this.lvlConf,o=i.width*i.cellWidth,u=i.height*i.cellHeight,null==r&&(r=new s),a=0;case 7:if(!(a<t.length)){e.next=18;break}if(l=t[a],null!=(f=l.getComponent(c))){e.next=12;break}return e.abrupt("continue",15);case 12:p=o+(r?r.right+r.left:0),v=u+(r?r.top+r.bottom:0),f.setContentSize(p,v);case 15:a++,e.next=7;break;case 18:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),e}())||l)||l);r._RF.pop()}}}));

System.register("chunks:///_virtual/UniqueUtils.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"bcf8aDZNAtM6JDzUYXUr9YD","UniqueUtils",void 0);var i=e("UniqueUtils",function(){function e(){}return e.getObjectUniqueId=function(n){return n.hasOwnProperty(e.UNIQUE_ID_PROP_NAME)||(e.prevGlobalUniqueId=e.globalUniqueId,e.globalUniqueId++,e.globalUniqueId===e.prevGlobalUniqueId&&(e.globalUniqueId=0),n[e.UNIQUE_ID_PROP_NAME]=e.globalUniqueId.toString()),n[e.UNIQUE_ID_PROP_NAME]},e}());i.UNIQUE_ID_PROP_NAME="UniqueId",i.globalUniqueId=0,i.prevGlobalUniqueId=0,n._RF.pop()}}}));

System.register("chunks:///_virtual/UserHud.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameContext.ts","./inject.ts","./LevelConfiguration.ts","./GameSM.ts"],(function(e){var t,o,r,n,i,a,s,c,l,u,p,g,h,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,s=e.Label,c=e.ProgressBar,l=e.Node,u=e.Component},function(e){p=e.GameContext},function(e){g=e.inject},function(e){h=e.LevelConfigurationService},function(e){f=e.GameStateMachine}],execute:function(){var v,d,m,b,y,w,L,S,C,_,M;i._RF.push({},"f4fe4EFozlFUKNqPagqFWBx","UserHud",void 0);var O=a.ccclass,P=a.property;e("UserHud",(v=O("UserHud"),d=P({type:s,tooltip:"Label component for displaying the current game score"}),m=P({type:s,tooltip:"Label component for displaying the remaining moves"}),b=P({type:c,tooltip:"Progress bar component showing progress towards target score"}),y=P({type:l,tooltip:"Node containing the game over window UI"}),v((S=t((L=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"scoreLabel",S,n(t)),r(t,"movesLabel",C,n(t)),r(t,"scoreProgress",_,n(t)),r(t,"gameOverWindow",M,n(t)),t._context=g(p),t._lvlConf=g(h),t._stateMachine=g(f),t}o(t,e);var i=t.prototype;return i.start=function(){this._context.addObserver(this),this._stateMachine.addStateObserver(this),this.updateScore(0),this.updateMoves(0),this.gameOverWindow&&(this.gameOverWindow.active=!1)},i.updateScore=function(e){this.scoreLabel&&(this.scoreLabel.string=e.toString()),this.scoreProgress&&(this.scoreProgress.progress=e/this._lvlConf.targetScore)},i.updateMoves=function(e){this.movesLabel&&(this.movesLabel.string=e+"/"+this._lvlConf.maxMoves)},i.onScoreChanged=function(e){this.updateScore(e)},i.onMovesChanged=function(e){this.updateMoves(e)},i.onStateChanged=function(e){"GameOver"===e&&this.gameOverWindow&&(this.gameOverWindow.active=!0)},t}(u)).prototype,"scoreLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(L.prototype,"movesLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(L.prototype,"scoreProgress",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(L.prototype,"gameOverWindow",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=L))||w));i._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});